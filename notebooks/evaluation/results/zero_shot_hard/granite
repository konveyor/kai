@ApplicationScoped
public class ShippingService implements ShippingServiceRemote {

    private final BigDecimal shippingRate1 = BigDecimal.valueOf(2.99);
    private final BigDecimal shippingRate2 = BigDecimal.valueOf(4.99);
    private final BigDecimal shippingRate3 = BigDecimal.valueOf(6.99);
    private final BigDecimal shippingRate4 = BigDecimal.valueOf(8.99);
    private final BigDecimal shippingRate5 = BigDecimal.valueOf(10.99);

    private final BigDecimal shippingInsuranceRate1 = BigDecimal.valueOf(0.02);
    private final BigDecimal shippingInsuranceRate2 = BigDecimal.valueOf(0.015);
    private final BigDecimal shippingInsuranceRate3 = BigDecimal.valueOf(0.01);

    @Inject
    private ShoppingCart shoppingCart;

    public double calculateShipping() {
        if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 0 && shoppingCart.getCartItemTotal() <= 25) {
            return shippingRate1.doubleValue();
        } else if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 25 && shoppingCart.getCartItemTotal() <= 50) {
            return shippingRate2.doubleValue();
        } else if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 50 && shoppingCart.getCartItemTotal() <= 75) {
            return shippingRate3.doubleValue();
        } else if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 75 && shoppingCart.getCartItemTotal() <= 100) {
            return shippingRate4.doubleValue();
        } else if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 100 && shoppingCart.getCartItemTotal() <= 10000) {
            return shippingRate5.doubleValue();
        }
        return 0;
    }

    public double calculateShippingInsurance() {
        if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 25 && shoppingCart.getCartItemTotal() <= 100) {
            return shippingInsuranceRate1.multiply(shoppingCart.getCartItemTotal()).setScale(2, RoundingMode.HALF_UP).doubleValue();
        } else if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 100 && shoppingCart.getCartItemTotal() <= 500) {
            return shippingInsuranceRate2.multiply(shoppingCart.getCartItemTotal()).setScale(2, RoundingMode.HALF_UP).doubleValue();
        } else if (shoppingCart != null && shoppingCart.getCartItemTotal() >= 500 && shoppingCart.getCartItemTotal() <= 10000) {
            return shippingInsuranceRate3.multiply(shoppingCart.getCartItemTotal()).setScale(2, RoundingMode.HALF_UP).doubleValue();
        }
        return 0;
    }
}
